#:kivy 2.0.0
#:import kivy kivy

<TitleLabel@Label>:
    canvas.before:
        Color:
            rgba: (0.59, 0.53, 0.76, 1)
        Rectangle:
            size: self.size
            pos: self.pos
    color: (1, 1, 1, 1)
<BlackLabel@Label>:
    color: (0, 0, 0, 1)
<BoxLayoutEntries@BoxLayout>:
    size_hint_y: None
    height: 30
<BoxLayoutResult@BoxLayout>:
    size_hint_y: None
    height: 40


<MainWindow>:
    submit_button: submit_button
    tamb: tamb
    pamb: pamb
    phi: phi
    deltap: deltap
    d1: d1
    d3: d3
    d2max: d2max
    d2min: d2min
    hc: hc
    hd: hd
    dgetto: dgetto
    lcd: lcd
    rapporto_AF: rapporto_AF
    errore_AF: errore_AF
    
    BoxLayout:
        id: main_box
        canvas.before:
            Color:
                rgba: (1, 1, 1, 1)
            Rectangle:
                size: self.size
                pos: self.pos
        orientation: "vertical"
        BoxLayout:
            id: title
            size_hint_y: 0.20
            TitleLabel:
                font_size: 30
                bold: True
                text: "AutoCARB"
        BoxLayout:
            id: fields
            orientation: "vertical"
            spacing: 2
            BoxLayoutEntries:
                BlackLabel:
                    text: "Temperatura ambiente [°C]"
                TextInput:
                    id: tamb
                    multiline: False
                    text: "20"
            BoxLayoutEntries:
                BlackLabel:
                    text: "Pressione ambienete [Pa]"
                TextInput:
                    id: pamb
                    multiline: False
                    text: "101325"
            BoxLayoutEntries:
                BlackLabel:
                    text: "Umidità relativa [%]"
                TextInput:
                    id: phi
                    multiline: False
                    text: "40"
            BoxLayoutEntries:
                BlackLabel:
                    text: "Delta pressione [Pa]"
                TextInput:
                    id: deltap
                    multiline: False
                    text: "13325"
            BoxLayoutEntries:
                BlackLabel:
                    text: "d1 [mm]"
                TextInput:
                    id: d1
                    multiline: False
                    text: "42"
            BoxLayoutEntries:
                BlackLabel:
                    text: "d3 [mm]"
                TextInput:
                    id: d3
                    multiline: False
                    text: "20" 
            BoxLayoutEntries:
                BlackLabel:
                    text: "d2 massimo[mm]"
                TextInput:
                    id: d2max
                    multiline: False
                    text: "19"
            BoxLayoutEntries:
                BlackLabel:
                    text: "d2 minimo [mm]"
                TextInput:
                    id: d2min
                    multiline: False
                    text: "19"
            BoxLayoutEntries:
                BlackLabel:
                    text: "hc [mm]"
                TextInput:
                    id: hc
                    multiline: False
                    text: "17"
            BoxLayoutEntries:
                BlackLabel:
                    text: "hd [mm]"
                TextInput:
                    id: hd
                    multiline: False
                    text: "45"
            BoxLayoutEntries:
                BlackLabel:
                    text: "numero del getto [-]"
                TextInput:
                    id: dgetto
                    multiline: False
                    text: "97"
            BoxLayoutEntries:
                BlackLabel:
                    text: "lunghezza del getto: lcd [mm]"
                TextInput:
                    id: lcd
                    multiline: False
                    text: "2"
            BoxLayoutResult:
                BlackLabel:
                    font_size: 15
                    bold: True
                    text: "Rapporto Aria Benzina"
                TextInput:
                    id: rapporto_AF
                    multiline: False
                    text: ""
            BoxLayoutResult:
                BlackLabel:
                    font_size: 15
                    bold: True
                    text: "Errore rispetto al valore stechiometrico [%]"
                TextInput:
                    id: errore_AF
                    text: ""
            BoxLayout:
        BoxLayout:
            id: button
            size_hint_y: 0.05
            Label:
            Button:
                id: submit_button
                background_normal:""
                background_color: (1, 0.3, 0, 1)
                background_down: ""
                text: "Invia"
                on_press:
                    self.background_color = (1, 0, 0, 0.8)
                on_release:
                    self.background_color = (1, 0.5, 0, 1)
                    root.conferma_invio_form()
            Label:

<CustomPopup>:
    invia_form: invia_form
    BoxLayout:
        orientation: "vertical"
        Label: 
            text: "Sei sicuro di inviare?"
        BoxLayout:
            Button:
                size_hint_y: None
                height: "50"
                text: "Cancel"
                on_release:
                    root.dismiss_popup()
            Button:
                id: invia_form
                size_hint_y: None
                height: "50"
                text: "Invia"
                on_release: 
                    root.invia_form()
                    root.dismiss_popup()